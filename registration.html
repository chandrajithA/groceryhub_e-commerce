<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GroceryHub - Shopping Website</title>
    <link rel="icon" href="images/Ellipse 1.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
  <style>
    
    form {
      max-width: 600px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #ccc;
      margin: 0 auto 40px auto;
      font-size: 16px;
      
    }
    label {
      display: block;
      margin: 15px 0 5px;

    }
    .inputtext {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    .error {
      color: red;
      font-size: 12px;
    }
    button {
      margin: 20px 40% 0 40%;
      padding: 10px 15px;
      color: black;
      border: 2px solid grey;
      border-radius: 5px;
        background-color: #8BC34A;
        color: #FFFFFF;
        border: none;
        cursor: pointer;
    }
  </style>
</head>
<body>

    <header>

        <div class="header1" id="header1">

            <div class="contactarea">
                <img src="images/phone.png" alt="">
                <span>+91 96748 585687</span>
                <img src="images/whatsapp.png" alt="">
                <span>+91 85789 57748</span>
            </div>

            <div class="description_area">
                <span id="description_text" class="description_text">World Fastest Online Shopping Destination</span>
            </div>

            <div class="userinfoarea" id="userinfoarea">
                
                <div class="currentlocation" id="currentlocation">
                    <span>Current Location</span>
                    <img src="images/down_arrow.png" alt="">
                </div>

                <div class="account" id="account">
                    <span>Account</span>
                    <img src="images/down_arrow.png" alt="">
                </div>

                <div class="loginarea" id="loginarea">
                    <img src="images/usericon.png" alt="">
                    <span id="loginstatus">Login</span>
                </div>
                
            </div>
        </div>
        <div id="header2" class="header2">

            <div class="logoarea" id="logoarea">
                <img src="images/Ellipse 1.png" id="logoimg" class="logoimg" alt="Logo image">
                <span class="logolabel" id="logolabel">Grocery Hub</span>
            </div>

            <nav id="mainnavlinks" class="mainnavlinks">
                <div class="navlinks" id="homepagelink">
                    <a href="home.html">Home</a>
                </div>
                <div class="navlinks" id="categoriespagelink">
                    <a href="products.html">Products</a>  
                </div>
                <!-- <div class="navlinks" id="dealspagelink">
                    <a href="deals.html">Deals</a> 
                </div> -->
             
            </nav>

            <div class="functionbtnarea" id="functionbtnarea">
                
                <!-- <div class="searcharea">
                    <input type="text" id="searchbar" class="searchbar" placeholder="Search..." >
                    <img src="images/SEARCH.png" id="searchicon" class="searchicon" alt="search the items icon">
                    
                </div> -->

                <div class="cartbtn" id="cartbtn">
                    <img src="images/Vector 8.png" id="carticon" class="carticon" alt="cart items section icon">
                    <span class="cartitemcount" id="cartitemcount"></span>
                    <span id="cartbtntext" class="cartbtntext">Cart</span>
                </div>

                <div class="wishlistbtn" id="wishlistbtn">
                    <img src="images/Vector O.png" id="wishlisticon" class="wishlisticon" alt="liked items section icon">
                    <span class="wishitemcount" id="wishitemcount"></span>
                    <span id="wishlistbtntext" class="wishlistbtntext">Liked</span>
                </div>
                
            </div>
        </div>

       

    </header>

<main>
  <h2 style="text-align: center; margin-bottom: 20px;">Create Account with GroceryHub</h2>

<form id="checkoutForm" novalidate>
  <label for="name">Full Name</label>
  <input type="text" id="name" class="inputtext" required>
  <div class="error" id="nameError"></div>

  <label for="email">Email</label>
  <input type="email" id="email" class="inputtext" required>
  <div class="error" id="emailError"></div>

  <label for="phone">Phone</label>
  <input type="tel" id="phone" maxlength="10" class="inputtext" required>
  <div class="error" id="phoneError"></div>

  <label for="address">Address</label>
  <input type="text" id="address" class="inputtext" required>
  <div class="error" id="addressError"></div>

  <label for="city">City</label>
  <input type="text" id="city" class="inputtext" required>
  <div class="error" id="cityError"></div>

  <label for="pincode">Pincode</label>
  <input type="tel" id="pincode" maxlength="6" class="inputtext" required>
  <div class="error" id="pincodeError"></div>

  <label for="password">Password</label>
  <input type="password" id="password" class="inputtext" required>
  <div class="error" id="passwordError"></div>

  <!-- <label for="card">Card Number</label>
  <input type="text" id="card" maxlength="16" required>
  <div class="error" id="cardError"></div> -->

  <button type="submit">Register</button>
</form>
</main>

<footer>

        <p>Copyright &copy; 2025 CroceryHub. All rights reserved and maintained by Chandrajith.</p>
        
    </footer>
<script src="websitescript.js"></script>
<script>


  window.addEventListener("pageshow", function (event) {
        if (event.persisted) {
            // The page was restored from the cache (like going back)
            window.location.reload(); // force reload so your logic runs again
        }
        });


  document.getElementById("checkoutForm").addEventListener("submit", function(event) {
    event.preventDefault();

    let isValid = true;

    // Clear all errors
    document.querySelectorAll(".error").forEach(e => e.textContent = "");

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const address = document.getElementById("address").value.trim();
    const city = document.getElementById("city").value.trim();
    const pincode = document.getElementById("pincode").value.trim();
    const password = document.getElementById("password").value.trim();
    // const card = document.getElementById("card").value.trim();

    if (name === "") {
      isValid = false;
      document.getElementById("nameError").textContent = "Name is required.";
    }

    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      isValid = false;
      document.getElementById("emailError").textContent = "Invalid email format.";
    }

    if (!/^\d{10}$/.test(phone)) {
      isValid = false;
      document.getElementById("phoneError").textContent = "Enter a valid 10-digit phone number.";
    }

    if (address.length < 10) {
      isValid = false;
      document.getElementById("addressError").textContent = "Address must be at least 10 characters.";
    }

    if (city === "") {
      isValid = false;
      document.getElementById("cityError").textContent = "City is required.";
    }

    if (!/^\d{6}$/.test(pincode)) {
      isValid = false;
      document.getElementById("pincodeError").textContent = "Enter a valid 6-digit pin code.";
    }

    if (password.length < 6) {
      isValid = false;
      document.getElementById("passwordError").textContent = "Password must be at least 6 characters.";
    }

    // if (!/^\d{16}$/.test(card)) {
    //   isValid = false;
    //   document.getElementById("cardError").textContent = "Card number must be 16 digits.";
    // }

    if (isValid) {
        let userdetail = {"username":name,"useremail":email,"userphone":phone,"useraddress":address,"usercity":city,"userpincode":pincode,"userpassword":password}
        let userdetaillist = JSON.parse(localStorage.getItem("userDetails")) || [];
        userdetaillist.push(userdetail);
        localStorage.setItem("userDetails",JSON.stringify(userdetaillist));
        alert("User Details registered successfully");
        window.history.back();
    }
    this.reset();
  });


  const cartbtn = document.getElementById("cartbtn"); 
            const wishlistbtn = document.getElementById("wishlistbtn");  
            const logoarea = document.getElementById("logoarea");
            const userloginstatusdisplayarea = document.getElementById("loginstatus");

            cartbtn.addEventListener('click',()=>{
                window.location.href="cartpage.html"
            })


            
            wishlistbtn.addEventListener('click',()=>{
                window.location.href="wishlist.html";
            })

            logoarea.addEventListener('click',()=>{
                window.location.href="home.html";
            })


            document.getElementById("loginarea").addEventListener('click',()=>{
                    let logincurrentstatus = sessionStorage.getItem("islogin") || "";
                    if(logincurrentstatus === "" || logincurrentstatus === "logout"){
                        window.location.href = "login.html";
                    }else if(logincurrentstatus === "login"){
                        let logoutconfirm = confirm("Are you sure you want to logout");
                        if(logoutconfirm){
                            sessionStorage.setItem("islogin","logout");
                            sessionStorage.removeItem("e_com-user");
                            sessionStorage.removeItem("e_com-shipaddress");
                            updateloginstatus();
                            alert("Logout successfully");
                        }
                    }
                })


            window.addEventListener("beforeunload", () => {
                    sessionStorage.setItem("scrollPosition", window.scrollY);
                    sessionStorage.setItem("scrollPage", window.location.pathname);
                });

                // Restore scroll position on reload
                window.addEventListener("load", () => {
                    const savedPage = sessionStorage.getItem("scrollPage");
                    const savedScrollY = sessionStorage.getItem("scrollPosition");
                   
                    
                    document.querySelectorAll("input").forEach(input => input.value = "");
                    
               
                    if (savedPage === window.location.pathname && savedScrollY !== null) {
                        setTimeout(() => {
                        window.scrollTo(0, parseInt(savedScrollY));
                        }, 100);
                    }
                });

                updatecartcount();
                updatewishlistcount();
                updateloginstatus();


</script>

</body>
</html>
