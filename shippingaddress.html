<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GroceryHub - Shopping Website</title>
    <link rel="icon" href="images/Ellipse 1.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
<style>
    
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      max-width: 500px;
      margin:  10px auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .buttonArea{
        margin-top: 20px; 
        display: flex; 
        justify-content: space-between;
    }

    

    button {
         
        padding: 10px 20px; font-size: 16px;
        border: none; background: #8BC34A;
        color: #fff; cursor: pointer;
        border-radius: 4px;
    }
    
    input { 
        width: 100%; 
        padding: 10px; 
        margin: 10px 0; 
    }

    h2 { 
    margin-bottom: 15px; 
    }

    .error {
      color: red;
    }

  </style>
</head>
<body>

    <header>

        <div class="header1" id="header1">

            <div class="contactarea">
                <img src="images/phone.png" alt="">
                <span>+91 96748 585687</span>
                <img src="images/whatsapp.png" alt="">
                <span>+91 85789 57748</span>
            </div>

            <div class="description_area">
                <span id="description_text" class="description_text">World Fastest Online Shopping Destination</span>
            </div>

            <div class="userinfoarea" id="userinfoarea">
                
                <div class="currentlocation" id="currentlocation">
                    <span>Current Location</span>
                    <img src="images/down_arrow.png" alt="">
                </div>

                <div class="account" id="account">
                    <span>Account</span>
                    <img src="images/down_arrow.png" alt="">
                </div>

                <div class="loginarea" id="loginarea">
                    <img src="images/usericon.png" alt="">
                    <span id="loginstatus"></span>
                </div>
                
            </div>
        </div>

        <div id="header2" class="header2">

            <div class="logoarea" id="logoarea">
                <img src="images/Ellipse 1.png" id="logoimg" class="logoimg" alt="Logo image">
                <span class="logolabel" id="logolabel">Grocery Hub</span>
            </div>

            <nav id="mainnavlinks" class="mainnavlinks">
                <div class="navlinks" id="homepagelink">
                    <a href="home.html">Home</a>
                </div>
                <div class="navlinks" id="categoriespagelink">
                    <a href="products.html">Products</a>  
                </div>
                <!-- <div class="navlinks" id="dealspagelink">
                    <a href="deals.html">Deals</a> 
                </div> -->
             
            </nav>

            <div class="functionbtnarea" id="functionbtnarea">
                
                <!-- <div class="searcharea">
                    <input type="text" id="searchbar" class="searchbar" placeholder="Search..." >
                    <img src="images/SEARCH.png" id="searchicon" class="searchicon" alt="search the items icon">
                    
                </div> -->

                <div class="cartbtn" id="cartbtn">
                    <img src="images/Vector 8.png" id="carticon" class="carticon" alt="cart items section icon">
                    <span class="cartitemcount" id="cartitemcount"></span>
                    <span id="cartbtntext" class="cartbtntext">Cart</span>
                </div>

                <div class="wishlistbtn" id="wishlistbtn">
                    <img src="images/Vector O.png" id="wishlisticon" class="wishlisticon" alt="liked items section icon">
                    <span class="wishitemcount" id="wishitemcount"></span>
                    <span id="wishlistbtntext" class="wishlistbtntext">Liked</span>
                </div>
                
            </div>
        </div>

    </header>

<main>
    <div class="container">
  
    
    <div class="step active">
      <h2>Shipping Address</h2>

      <form id="checkoutForm" novalidate>
        <input type="text" id="name" class="inputtext" placeholder="Full Name" required>
        <div class="error" id="nameError"></div>

        
        <input type="tel" id="phone" maxlength="10" class="inputtext" placeholder="Phone" required>
        <div class="error" id="phoneError"></div>

        
        <input type="text" id="address" class="inputtext" placeholder="Address" required>
        <div class="error" id="addressError"></div>

        
        <input type="text" id="city" class="inputtext" placeholder="City" required>
        <div class="error" id="cityError"></div>

        
        <input type="tel" id="pincode" maxlength="6" class="inputtext" placeholder="Pincode" required>
        <div class="error" id="pincodeError"></div>
        <div class="buttonArea">
            <button type="button"  onclick="navigateToPayment()">Use Billing Address</button>
             <button type="submit"  onclick="validateForm(event)">Next</button>
        </div>
        
        </form> 
    </div>

    
    
    
      
    
  
</div>
</main>

<footer>

        <p>Copyright &copy; 2025 CroceryHub. All rights reserved and maintained by Chandrajith.</p>
        
    </footer>

<script src="websitescript.js"></script>
<script>


        window.addEventListener("pageshow", function (event) {
        if (event.persisted) {
            // The page was restored from the cache (like going back)
            window.location.reload(); // force reload so your logic runs again
        }
        });

            const cartProducts = JSON.parse(localStorage.getItem("cartitems")) ;

            if(cartProducts === null){
                // window.location.href = "cartpage.html";
                 window.location.replace("cartpage.html");
            }

            const userloginstatusdisplayarea = document.getElementById("loginstatus");
            const cartbtn = document.getElementById("cartbtn"); 
            const wishlistbtn = document.getElementById("wishlistbtn");  
            const logoarea = document.getElementById("logoarea");

            cartbtn.addEventListener('click',()=>{
                window.location.href="cartpage.html"
            })


            
            wishlistbtn.addEventListener('click',()=>{
                window.location.href="wishlist.html";
            })

            logoarea.addEventListener('click',()=>{
                window.location.href="home.html";
            })



                document.getElementById("loginarea").addEventListener('click',()=>{
                    let logincurrentstatus = sessionStorage.getItem("islogin") || "";
                    if(logincurrentstatus === "" || logincurrentstatus === "logout"){
                        window.location.href = "login.html";
                    }else if(logincurrentstatus === "login"){
                        let logoutconfirm = confirm("Are you sure you want to logout");
                        if(logoutconfirm){
                            sessionStorage.setItem("islogin","logout");
                            sessionStorage.removeItem("e_com-user");
                            sessionStorage.removeItem("e_com-shipaddress");
                            updateloginstatus();
                            alert("Logout successfully");
                        }
                    }
                })



                function navigateToPayment(){
                    
                    sessionStorage.setItem("e_com-shipaddress","skip");
                    window.location.href="payment.html";
                    document.querySelectorAll("input").forEach(input => input.value = "");
                }

                    
                




  






  function validateForm(event) {
   event.preventDefault();

    let isValid = true;

    // Clear all errors
    document.querySelectorAll(".error").forEach(e => e.textContent = "");


    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const address = document.getElementById("address").value.trim();
    const city = document.getElementById("city").value.trim();
    const pincode = document.getElementById("pincode").value.trim();
    
    
   
    

    if (name === "") {
      isValid = false;
      document.getElementById("nameError").textContent = "Name is required.";
    }

    if (!/^\d{10}$/.test(phone)) {
      isValid = false;
      document.getElementById("phoneError").textContent = "Enter a valid 10-digit phone number.";
    }

    if (address.length < 10) {
      isValid = false;
      document.getElementById("addressError").textContent = "Address must be at least 10 characters.";
    }

    if (city === "") {
      isValid = false;
      document.getElementById("cityError").textContent = "City is required.";
    }

    if (!/^\d{6}$/.test(pincode)) {
      isValid = false;
      document.getElementById("pincodeError").textContent = "Enter a valid 6-digit pin code.";
    }

    // const card = document.getElementById("card").value.trim();
    // const expire = document.getElementById("expire").value.trim();
    // const cvv = document.getElementById("cvv").value.trim();

    // if (!/^\d{16}$/.test(card)) {
    //   isValid = false;
    //   document.getElementById("cardError").textContent = "Enter a valid 16-digit Card Number.";
    // }

    // if (!/^\d{4}$/.test(expire)) {
    //   isValid = false;
    //   document.getElementById("expireError").textContent = "Enter a valid expire month and year as MMYY.";
    // }

    // if (!/^\d{3}$/.test(cvv)) {
    //   isValid = false;
    //   document.getElementById("cvvError").textContent = "Enter a valid 3-digit CVV.";
    // }


    if(isValid){
        let shippingaddress = {"name":name,"phone":phone,"address":address,"city":city,"pincode":pincode}
        sessionStorage.setItem("e_com-shipaddress",JSON.stringify(shippingaddress));
        window.location.href = "payment.html";
    }
        
  }




  




                window.addEventListener("beforeunload", () => {
                    sessionStorage.setItem("scrollPosition", window.scrollY);
                    sessionStorage.setItem("scrollPage", window.location.pathname);
                });

                // Restore scroll position on reload
                window.addEventListener("load", () => {
                    const savedPage = sessionStorage.getItem("scrollPage");
                    const savedScrollY = sessionStorage.getItem("scrollPosition");

                    if (savedPage === window.location.pathname && savedScrollY !== null) {
                        setTimeout(() => {
                        window.scrollTo(0, parseInt(savedScrollY));
                        }, 100);
                    }
                });



                    
                // Restore scroll position on reload
                window.addEventListener("beforeunload", () => {
                    sessionStorage.setItem("scrollPosition", window.scrollY);
                    sessionStorage.setItem("scrollPage", window.location.pathname);
                });

                // Restore scroll position on reload
                window.addEventListener("load", () => {
                    const savedPage = sessionStorage.getItem("scrollPage");
                    const savedScrollY = sessionStorage.getItem("scrollPosition");
                   
                    
                    document.querySelectorAll("input").forEach(input => input.value = "");
                    
               
                    if (savedPage === window.location.pathname && savedScrollY !== null) {
                        setTimeout(() => {
                        window.scrollTo(0, parseInt(savedScrollY));
                        }, 100);
                    }
                });


            updatecartcount();
            updatewishlistcount();
            updateloginstatus();
</script>

</body>
</html>
